# To use this file, run `docker-compose up`.
version: '3.8'

services:
  # Eosio node
  eosio_nodeos:
    build: eosio
    container_name: nodeos
    volumes:
     - type: bind
       source: /Users/maxpetriev/eos # EDIT THIS VALUE!
       target: /eosio/data
    ports:
      - "8888:8888"
      - "9876:9876"
      - "8080:8080"
    networks:
      volentix:
        ipv4_address: 172.20.0.5
    stop_grace_period: 10m
    stop_signal: SIGINT
    command:
      nodeos

  # Eosio keosd
  eosio_keosd:
    build: eosio
    container_name: keosd
    volumes:
     - type: bind
       source: /Users/maxpetriev/eos/wallet # EDIT THIS VALUE!
       target: /eosio/wallet
    ports:
      - "8901:8901"
    networks:
      volentix:
        ipv4_address: 172.20.0.7
    stop_grace_period: 10m
    stop_signal: SIGINT
    command:
      keosd
  # Ethereum node
  ethereum_parity:
    build: ethereum
    container_name: parity
    volumes:
     - type: bind
       source: /Users/maxpetriev/ethereum # EDIT THIS VALUE!
       target: /ethereum/data
    ports:
      - "30304:30304"
      - "8546:8546"
      - "8547:8547"
    networks:
      volentix:
        ipv4_address: 172.20.0.4

  # Bitcoind node
  bitcoin-core:
    build: bitcoin
    container_name: bitcoin
    volumes:
     - type: bind
       source: /Users/maxpetriev/bitcoin # EDIT THIS VALUE!
       target: /bitcoin/data
    ports:
      - "18443:18443"
      - "18444:18444"
    command:
      -printtoconsole
      -rpcbind=0.0.0.0
      -rpcallowip=172.20.0.0/24
      -rpcauth='sylvain:61ec18acbeb8975bada6286075456714$f5995cc314abd21db9b2ba60a26d38f10946def4325f1c6a7d768f681c706c52'  # EDIT THIS VALUE!
    networks:
      volentix:
        ipv4_address: 172.20.0.2

  vdexnode:
    image: volentix/vdexnode:latest
    container_name: vdexnode
    environment: # EDIT THESE VALUES!
      - IP=198.50.136.143 # Comment to transform into a bootstrap
      - EOSKEY=EOS6PdTCWZgWMh4s5EDxYK3aL6DPC2ksDusTQpxE38QVmUzYLjLt9
      - BITCOIN_USER=sylvain
      - BITCOIN_PASS=VBtu_InZ1oTL1oeKkZbSm97QzLMTPr0yvo6AFY0GFT4=
      - BITCOIN_ENDPOINT=bitcoin
      - BITCOIN_PORT=18443
    expose:
      - "4222"
      - "8000"
    ports:
      - "4222:4222/udp"
      - "8000:8000"
    command:
      server
    networks:
      volentix:
        ipv4_address: 172.20.0.3

  vdexgateway:
    build: gateway
    container_name: gateway
    networks:
      volentix:
        ipv4_address: 172.20.0.6

networks:
  volentix:
    driver: bridge
    ipam:
      driver: default
      config:
      - subnet: 172.20.0.0/24
